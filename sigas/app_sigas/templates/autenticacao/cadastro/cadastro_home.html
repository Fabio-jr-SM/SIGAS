{% extends 'base.html' %}

{% block title %}
Sigas - Inicio
{% endblock %}

{% block content %}

<div class="wrapper">
    {% include 'utils/asidebar.html' %}

    {% if user.is_staff %}
    <div class="main p-3">
        <div class="container">
            <a href="{% url 'app_sigas:pagina_inicial' %}" class="btn btn-secondary mb-3"><i class="bi bi-arrow-left"></i></a>
            <h2 class="mt-1">Novo cadastro:</h2>
            <div class="mt-3">
                <a href="{% url 'app_sigas:cadastro_aluno' %}" class="btn btn-secondary">Cadastrar Aluno</a>
                <a href="{% url 'app_sigas:cadastro_professor' %}" class="btn btn-secondary">Cadastrar Professor</a>
            </div>



            <h2 class="mt-5">Usuarios cadastrados:</h2>
            <!-- Tabela de Alunos -->
            <button class="btn btn-secondary" type="button" data-bs-toggle="collapse" data-bs-target="#alunosCollapse"
                aria-expanded="false" aria-controls="alunosCollapse">
                Alunos
            </button>

            <button class="btn btn-secondary" type="button" data-bs-toggle="collapse"
                data-bs-target="#professoresCollapse" aria-expanded="false" aria-controls="professoresCollapse">
                Professores
            </button>

            <div class="collapse" id="alunosCollapse">
                <!-- Tabela de Alunos -->
                <div class="collapse" id="alunosCollapse">
                    <h4 class="mt-4">Alunos:</h4>
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Data de Nascimento</th>
                                <th>Matrícula</th>
                                <th>Curso</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for aluno in alunos %}
                            <tr>
                                <td>{{ aluno.pessoa.nome_completo }}</td>
                                <td>{{ aluno.pessoa.data_nascimento }}</td>
                                <td>{{ aluno.pessoa.matricula }}</td>
                                <td>
                                    {% for curso in aluno.curso.all %}
                                    {{ curso.nome }}
                                    {% endfor %}
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>

                <!-- Tabela de Professores -->
                <div class="collapse mt-4" id="professoresCollapse">
                    <h4>Professores:</h4>
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Data de Nascimento</th>
                                <th>Matrícula</th>
                                <th>Disciplinas</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for professor in professores %}
                            <tr>
                                <td>{{ professor.pessoa.nome_completo }}</td>
                                <td>{{ professor.pessoa.data_nascimento }}</td>
                                <td>{{ professor.pessoa.matricula }}</td>
                                <td>
                                    {% for disciplina in professor.disciplina_set.all %}
                                    {{ disciplina.nome }}
                                    {% if not forloop.last %}, {% endif %}
                                    {% endfor %}
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>

                {% include 'utils/footer.html' %}
            </div>
        </div>

        {% else %}
        <h2>você não tem acesso a essa página</h2>
        {% endif %}

    </div>
    {% endblock %}